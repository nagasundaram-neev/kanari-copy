
var module = angular.module("kanariMobile", ["google-maps"]).config(function($routeProvider,$locationProvider){
    // bring back /# urls by turning OFF html5 paths
    // JQueryMobileAngularAdapter turns in ON by default
    // https://github.com/tigbro/jquery-mobile-angular-adapter/issues/163#issuecomment-16928255
    $locationProvider.html5Mode(false);
    $locationProvider.hashPrefix("");
    // routes
   //console.log("in router");
    $routeProvider
        .when('/home',{templateUrl:"<%= asset_path 'assets/angular/templates/home_mobile.html' %>"}) // this is the default JQueryMobile view in index.html
        .when('/index',{templateUrl: "<%= asset_path 'assets/angular/templates/landing_page.html' %>" })
        .when('/register',{templateUrl:'register.html'}) // this is a familiar AngularJS route using a partial ...
        .when('/login',{templateUrl:"<%= asset_path 'assets/angular/templates/login_mobile.html' %>"}) // ... and so is this
        .when('/regsuccess',{templateUrl: "<%= asset_path 'assets/angular/templates/regsuccess.html' %>" })
        .when('/signUp',{templateUrl: "<%= asset_path 'assets/angular/templates/signUp_mobile.html' %>" })
        .when('/signedUp',{templateUrl: "<%= asset_path 'assets/angular/templates/signedUp_mobile.html' %>" })
        .when('/settings',{templateUrl: "<%= asset_path 'assets/angular/templates/settings_mobile.html' %>" })
        .when('/forgotPassword',{templateUrl: "<%= asset_path 'assets/angular/templates/forgotPassword_mobile.html' %>" })
        .when('/feedback',{templateUrl: "<%= asset_path 'assets/angular/templates/feedback.html' %>" })
        .when('/feedback_step2',{templateUrl: "<%= asset_path 'assets/angular/templates/feedback_step2.html' %>" })
        .when('/changePassword',{templateUrl: "<%= asset_path 'assets/angular/templates/changePassword_mobile.html' %>" })
        .when('/redeemPoints',{templateUrl: "<%= asset_path 'assets/angular/templates/restaurantList.html' %>" })
        .when('/confirmRedeem',{templateUrl: "<%= asset_path 'assets/angular/templates/redeemPoints.html' %>" })
        .when('/feedbackSubmitSuccess',{templateUrl: "<%= asset_path 'assets/angular/templates/feedback_submit.html' %>" })
        .when('/showRestaurant',{templateUrl: "<%= asset_path 'assets/angular/templates/showRestaurant.html' %>" })
        .when('/transactionHistory',{templateUrl: "<%= asset_path 'assets/angular/templates/transactionHistory.html' %>" })
        .when('/locationMap',{templateUrl: "<%= asset_path 'assets/angular/templates/locationMap.html' %>" })
        .when('/api/users/password/edit', {templateUrl: "<%= asset_path 'assets/angular/templates/reset_password_mobile.html' %>"})
        .otherwise({redirectTo: '/index'});
});


  module.filter('truncate', function () {
        return function (text, length, end) {
            if (isNaN(length))
                length = 15;
 
            if (end === undefined)
                end = "...";
 
            if (text.length <= length ) {
                return text;
            }
            
            else {
                return String(text).substring(0, length-end.length) + end;
                
            }
 
        };
    });
    
     module.filter('truncateName', function () {
        return function (text, length, end) {
            if (isNaN(length))
                length = 14;
 
            if (end === undefined)
                end = "...";
 
            if (text.length <= length ) {
                return text;
            }
            
            else {
                return String(text).substring(0, length-end.length) + end;
                
            }
 
        };
    });
    



